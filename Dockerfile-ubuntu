FROM ubuntu:22.04

# ENV container docker
ENV UBUNTU_USERNAME=mikee

RUN apt-get update \
    && apt-get upgrade -y \
    && apt-get install -y \
      python3-pip \
      sudo \
    && apt-get clean all

# https://pypi.org/project/pip/
RUN pip3 install --no-cache-dir --upgrade pip==23.1.2 && \
    pip3 install --no-cache-dir \
      # https://pypi.org/project/ansible/
      ansible==7.5.0 \
      # https://pypi.org/project/ansible-lint/
      ansible-lint==6.15.0 \
      # https://pypi.org/project/yamllint/
      yamllint==1.31.0 \
      # https://pypi.org/project/packaging/
      packaging==23.1 \
      # https://pypi.org/project/pyOpenSSL/
      pyOpenSSL==23.1.1

RUN useradd ${UBUNTU_USERNAME} && usermod -aG sudo ${UBUNTU_USERNAME}

CMD ["/usr/bin/sleep", "infinity"]
