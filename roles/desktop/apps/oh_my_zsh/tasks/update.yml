---
- name: "Update oh-my-zsh"
  shell: git pull --rebase --stat origin master
  become: true
  become_user: "{{ item[0] }}"
  register: omz_upd_output
  changed_when: omz_upd_output.stdout != 'Already up to date.'
  args:
    executable: /bin/zsh
    chdir: "{{ item[1] }}"
  tags:
    - update
  loop: >
    {{
      [
        "{{ user_name }}",
        "root"
      ] | product([
        "~/.oh-my-zsh"
      ])
    }}
