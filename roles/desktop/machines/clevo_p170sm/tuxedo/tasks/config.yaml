---
- name: Copy default logind.conf to /etc/systemd
  ansible.builtin.copy:
    src: /usr/lib/systemd/logind.conf
    dest: /etc/systemd/logind.conf
    remote_src: true
    mode: '0644'
    force: false
  become: true

- name: Set HandleLidSwitch to ignore in logind.conf
  ansible.builtin.lineinfile:
    path: /etc/systemd/logind.conf
    regexp: '^#HandleLidSwitch='
    line: 'HandleLidSwitch=ignore'
    # backrefs: true
  become: true
  loop:
    - regexp: '^#HandleLidSwitch='
      line: 'HandleLidSwitch=ignore'
    - regexp: '^#HandlePowerKey='
      line: 'HandlePowerKey=ignore'
    - regexp: '^#HandlePowerKeyLongPress='
      line: 'HandlePowerKeyLongPress=ignore'

- name: Remove gnome-software
  ansible.builtin.dnf:
    name: gnome-software
    state: absent
  become: true

# - name: Screenshot
#   become: true
#   become_user: "{{ user_name }}"
#   community.general.dconf:
#     # org.gnome.shell.keybindings screenshot ['<Shift>Print']
#     key: "/org/gnome/shell/keybindings/screenshot"
#     value: "['<Primary><Shift>numbersign']"
#     state: present


# /etc/gdm/custom.conf
# # GDM configuration storage

# [daemon]
# AutomaticLoginEnable=True
# AutomaticLogin=mikee
# # Uncomment the line below to force the login screen to use Xorg
# #WaylandEnable=false

# [security]

# [xdmcp]

# [chooser]

# [debug]
# # Uncomment the line below to turn on debugging
# #Enable=true

# org.gnome.settings-daemon.plugins.power sleep-inactive-ac-type 'nothing'

# org.gnome.settings-daemon.plugins.power power-button-action 'nothing'

# org.gnome.desktop.screensaver lock-enabled false
