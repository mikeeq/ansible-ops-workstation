---
all:
  vars:
    ansible_python_interpreter: /usr/bin/python3
    ansible_ssh_common_args: '-o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no'
  children:
    desktop:
      children:
        local:
    baremetal:
      children:
        pc:
        clevo:
          vars:
            ansible_user: test_user
            ansible_ssh_pass: test_pass!
            ansible_sudo_pass: "{{ ansible_ssh_pass }}"
            ansible_become_pass: "{{ ansible_ssh_pass }}"
          children:
            vms:
              children:
                publicdns:
                privatedns:
                nordvpngateway:
                cloudflaregateway:
                openvpn:

local:
  hosts:
    localhost:
      ansible_connection: local

pc:
  hosts:
    mikeePC:
      ansible_host: 192.168.1.10

clevo:
  hosts:
    clevoF35:
      ansible_host: 192.168.1.20

vms:
  vars:
    ansible_host: "{{ vms | selectattr('name', 'equalto', inventory_hostname) | map(attribute='ipv4_addresses') | first | first | split('/') | first }}"

publicdns:
  hosts:
    dns1:

openvpn:
  hosts:
    vpn1:

# TODO: add pipelines for reboot huawei router
