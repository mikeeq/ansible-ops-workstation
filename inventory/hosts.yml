---
all:
  vars:
    ansible_ssh_common_args: '-o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no'
    ansible_python_interpreter: /usr/bin/python3
  children:
    desktop:

desktop:
  children:
    local:
      hosts:
        localhost:
          ansible_connection: local
      children:
        vms:
          children:
            publicdns:
            openvpn:
          vars:
            ansible_host: "{{ vms | selectattr('name', 'equalto', inventory_hostname) | map(attribute='ipv4_addresses') | first | first | split('/') | first }}"
            ansible_user: testuser
            ansible_ssh_pass: test_pass
            ansible_become_pass: "{{ ansible_ssh_pass }}"
            # ansible_sudo_pass: "{{ ansible_ssh_pass }}"
    vms:
      hosts:
        # fedora35vagrant:
        #   ansible_host: fedora35.srv
        fedora35vm:
          ansible_host: 192.168.122.120

publicdns:
  hosts:
    dns4:

openvpn:
  hosts:
    vpn1:
